/*
 * JSP generated by Resin-3.1.9 (built Mon, 13 Apr 2009 11:09:12 PDT)
 */

package _jsp._notice;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import java.sql.*;
import java.io.*;
import java.text.*;
import common.util.*;

public class _list__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;

  
  //-------------------------------------------
  // DB_Connection()
  //       - Make DB Connection
  //   conn : Output Connection
  //
  //-------------------------------------------
  Connection DB_Connection() throws ClassNotFoundException, SQLException,Exception
  {
  	Class.forName("oracle.jdbc.driver.OracleDriver");
  	String url="jdbc:oracle:thin:@10.2.1.246:1521:ORAVG";
     	Connection conn = DriverManager.getConnection(url, "sol", "sol");
     	
     	return conn;
  }
  
  //-------------------------------------------
  // DB_Disconnection()
  //       - Make DB Disconnection
  //   conn : Output Disconnection
  //
  //-------------------------------------------
  void DB_Disconnection(Connection conn) throws ClassNotFoundException, SQLException,Exception
  {
  	conn.close();
  }



  //-------------------------------------------
  // CheckNull
  //       - If Input is Null, Write Space
  //   obj : RecordSet
  //-------------------------------------------

  String CheckNull(String str)
  {
    String strTmp;
  	if (str == null)
  		strTmp = "";
  	else
  		strTmp = str;
    return strTmp;
  }

  //----------------------------------------------------
  // SelectBoxCheck
  //   conn : Connection Object
  //----------------------------------------------------
  String[] SelectBoxCheck(String qry_cond, String[] qry_cond_value) throws SQLException
  {
    String selectBox_check[];
    selectBox_check = new String[qry_cond_value.length];

    for(int i=0; i < selectBox_check.length; i++)
    {
  	  if(qry_cond != null && qry_cond.equals(qry_cond_value[i]))
  	  {
  		selectBox_check[i] = "SELECTED";
  	  }
  	  else
  	  {
  	  	selectBox_check[i] = "";
  	  }
    }
    return selectBox_check;
  }

  //-------------------------------------------
  // CopyRightLogo
  //
  //-------------------------------------------
  String CopyRightLogo()
  {
    String str;
    str = "<table width='99%' border='0' cellspacing='0' cellpadding='0' align='center'>";
    str += "<tr><td width='100%' height='2' align='center'>";
    str += "<HR width=100% size=2></td></tr>";
    str += "<tr><td width='100%' align='center'>";
    str += "&copy;Copyright 2007 ";
    str += "<FONT color=green>Fast Future Brands Pty Ltd.</FONT> All Rights Reserved.<BR>";
    str += "Contact <FONT color=blue><A href='mailto:scm@ffb.net.au'>scm@ffb.net.au</A></FONT>";
    str += " for more information.";
    str += "</td></tr></table>";

    return (String)str;
  }

  //-------------------------------------------
  // Redirect
  //
  //-------------------------------------------
  String Redirect(String url)
  {
  	String str = "<META http-equiv='refresh' content='0;url="+url+"'>";
  	return str;
  }

  //-------------------------------------------
  // GetPageIndex
  //       - Get File Path
  //   file_path : Input File Path
  //   file_name : Input File Name
  //   out_str   : Output file path
  //-------------------------------------------
  String GetPageIndex(int curpage, int totpage, String url, String add_tag)
  {

    int idx, i, idxpage, tmp, tmp2, tmp3;
    String outStr="";
    if (add_tag == null) add_tag = "";
    idx = curpage / 10 + 1;
  	for(i=0; i<=9; i++)
  	{
  		idxpage = (idx-1)*10 +i;
  		if(idxpage !=0 && idxpage <= totpage)
  		{
  			if(idxpage == curpage)
  			{
  				if (i==0)
  				{
  					tmp = idxpage-1;
            outStr = outStr + "<FONT size=2>";
            outStr = outStr + "<A HREF='"+url+"?page=1"+add_tag+"' ";
            outStr = outStr + ">#</A>&nbsp;";
            outStr = outStr + "<A HREF='"+url+"?page="+tmp+add_tag+"' ";
            outStr = outStr + "><-</A>";
            outStr = outStr + "<FONT size=2>[<B>"+idxpage+"</B>]";
          }
          else if (i==9)
  				{
  						tmp = idxpage+1;
  						tmp2 = idxpage-1;
  						tmp3 = totpage;
              outStr = outStr + "<FONT size=2>";
              outStr = outStr + "<FONT size=2>[<B>"+idxpage+"</B>]";
  						if (totpage >= tmp )
  						{
              	outStr = outStr + "<A HREF='"+url+"?page="+tmp+add_tag+"' ";
              	outStr = outStr + ">-></A>";
              	outStr = outStr + "&nbsp;<A HREF='"+url+"?page="+tmp3+add_tag+"' ";
              	outStr = outStr + ">#</A>";
  						}
          }
          else
          {
            outStr = outStr + "<FONT size=2>[<B>"+idxpage+"</B>]";
          }

  			}
  			else
  			{
  				if (i==0)
  				{
  					  tmp = idxpage-1;
              outStr = outStr + "<FONT size=2>";
              outStr = outStr + "<A HREF='"+url+"?page=1"+add_tag+"' ";
              outStr = outStr + ">#</A>&nbsp;";
              outStr = outStr + "<A HREF='"+url+"?page="+tmp+add_tag+"' ";
              outStr = outStr + "><-</A>";
              outStr = outStr + "[<A HREF='"+url+"?page="+idxpage+add_tag+"' ";
              outStr = outStr + ">"+idxpage+"</A>]";
          }
          else if (i==9)
  				{
  						tmp = idxpage+1;
  						tmp2 = totpage;
              outStr = outStr + "<FONT size=2>";
              outStr = outStr + "[<A HREF='"+url+"?page="+idxpage+add_tag+"' ";
              outStr = outStr + ">"+idxpage+"</A>]";
  						if (totpage >= tmp )
  						{
              	outStr = outStr + "<A HREF='"+url+"?page="+tmp+add_tag+"' ";
              	outStr = outStr + ">-></A>";
              	outStr = outStr + "&nbsp;<A HREF='"+url+"?page="+tmp2+add_tag+"' ";
              	outStr = outStr + ">#</A>";
  						}
          }
          else
          {
              outStr = outStr + "<FONT size=2>";
              outStr = outStr + "[<A HREF='"+url+"?page="+idxpage+add_tag+"' ";
              outStr = outStr + ">"+idxpage+"</A>]";
          }
  			}
  		}
  	}
  	return outStr;
  }

  //-------------------------------------------
  // ascToksc
  //       - Get File Path
  //   out_str   : Output file path
  //-------------------------------------------
  String ascToksc(String str) throws UnsupportedEncodingException
  {
  		if(str==null)
  			return null;

  		return new String(str.getBytes("8859_1"),"KSC5601");
  }

  //-------------------------------------------
  // kscToasc
  //       - Get File Path
  //   out_str   : Output file path
  //-------------------------------------------
  String kscToasc(String str) throws UnsupportedEncodingException
  {
  		if(str==null)
  			return null;

  		return new String(str.getBytes("KSC5601"),"8859_1");
  }

  //-------------------------------------------
  // convertHtmlBr
  //       - Get File Path
  //   out_str   : Output file path
  //-------------------------------------------
  String convertHtmlBr(String comment)
  	{
  		int length = comment.length();
  		StringBuffer buffer = new StringBuffer();

  		for (int i = 0; i < length; ++i)
  		{
  			String comp = comment.substring(i, i+1);
  			if ("\r".compareTo(comp) == 0)
  			{
  				comp = comment.substring(++i, i+1);
  				if ("\n".compareTo(comp) == 0)
  					buffer.append("<BR>\r");
  				else
  					buffer.append("\r");
  			}
                          buffer.append(comp);
  		}
  		return buffer.toString();
  	}


  
  //----------------------------------------------------
  // CreateBBSTABLE
  //     - Create Table
  //   conn : Connection Object
  //----------------------------------------------------
  int CreateBBSTABLE(Connection conn, String table_name) throws SQLException
  {
    String sqlstr;
    
    // table creation....
    sqlstr = " CREATE TABLE "+table_name ;
    sqlstr = sqlstr + " (bbs_id number(20) Not Null PRIMARY KEY, " ;
    sqlstr = sqlstr + " subject varchar2(255) Not Null, " ;
    sqlstr = sqlstr + " creator varchar2(255) Null, " ;
    sqlstr = sqlstr + " password varchar2(10) Null, " ;
    sqlstr = sqlstr + " creator_email varchar2(255) Null, " ;
    sqlstr = sqlstr + " creator_home varchar2(255) Null, " ;
    sqlstr = sqlstr + " create_date date Null, " ;
    sqlstr = sqlstr + " contents varchar2(2000) Null, " ;
    sqlstr = sqlstr + " filename varchar2(255) Null, " ;
    sqlstr = sqlstr + " filesize number(20) Null, " ;
    sqlstr = sqlstr + " hits number(5) Null, " ;
    sqlstr = sqlstr + " p_bbs_id number(20) Not Null, " ;
    sqlstr = sqlstr + " p_level number(10) Not Null, " ;
    sqlstr = sqlstr + " p_serial number(10) Null) " ;
    
    Statement stmt = conn.createStatement();
    int result = stmt.executeUpdate(sqlstr);
    return result;
  }
  //----------------------------------------------------
  // SelectBBSQry
  //   conn : Connection Object
  //   rs : Output RecordSet   
  //----------------------------------------------------
  ResultSet SelectBBSQry(Connection conn, String table_name, String qry_cond, String qry_contents) throws SQLException
  {
  
  	String sqlstr = null;
  	sqlstr = " SELECT * FROM "+table_name ;  
    	sqlstr = sqlstr + " WHERE " + qry_cond + " LIKE '%"+qry_contents+"%'";
  	sqlstr = sqlstr + " ORDER BY p_bbs_id DESC, p_serial ASC";
    
  	Statement stmt = conn.createStatement();
  	ResultSet rs = stmt.executeQuery(sqlstr);
  	return (rs==null)?null:rs;
  }
  
  //----------------------------------------------------
  // SelectBBS
  //   conn : Connection Object
  //   rs : Output RecordSet   
  //----------------------------------------------------
  ResultSet SelectBBS(Connection conn,String table_name) throws SQLException
  {
    String sqlstr;
    sqlstr = " SELECT * FROM "+table_name ;
    
  	sqlstr = sqlstr + " ORDER BY p_bbs_id DESC, p_serial ASC";
    
  	Statement stmt = conn.createStatement();
  	ResultSet rs = stmt.executeQuery(sqlstr);
  	return (rs==null)?null:rs;
  }
  
  //----------------------------------------------------
  // SelectBBS_id
  //   conn : Connection Object
  //   rs : Output RecordSet   
  //----------------------------------------------------
  ResultSet SelectBBS_id(Connection conn,String table_name,int bbs_id) throws SQLException
  {
    String sqlstr;
    sqlstr = " SELECT * FROM "+table_name ;
  	sqlstr = sqlstr + " WHERE bbs_id = "+bbs_id ;
    
  	Statement stmt = conn.createStatement();
  	ResultSet rs = stmt.executeQuery(sqlstr);
  	return (rs==null)?null:rs;
  }
  
  //----------------------------------------------------
  // SelectBBSQryCount
  //   conn : Connection Object
  //   rs : Output RecordSet   
  //----------------------------------------------------
  ResultSet SelectBBSQryCount(Connection conn, String table_name, String qry_cond, String qry_contents) throws SQLException
  {
  	String sqlstr;
    	sqlstr = " SELECT count(*) as counter FROM "+table_name ;
  	sqlstr = sqlstr + " WHERE " + qry_cond + " LIKE '%"+qry_contents+"%'";
  	  
  	Statement stmt = conn.createStatement();
  	ResultSet rs = stmt.executeQuery(sqlstr);
  	return (rs==null)?null:rs;
  }
  
  //----------------------------------------------------
  // SelectBBSCount
  //   conn : Connection Object
  //   rs : Output RecordSet   
  //----------------------------------------------------
  ResultSet SelectBBSCount(Connection conn,String table_name) throws SQLException
  {
    String sqlstr;
    sqlstr = " SELECT count(*) as counter FROM "+table_name ;  
    
  	Statement stmt = conn.createStatement();
  	ResultSet rs = stmt.executeQuery(sqlstr);
  	return (rs==null)?null:rs;
  }
  
  //----------------------------------------------------
  // GetMaxBBS
  //   conn : Connection Object
  //----------------------------------------------------
  int GetMaxBBS(Connection conn,String table_name) throws SQLException
  {
    String sqlstr;
    sqlstr = " SELECT MAX(bbs_id) as last_num FROM "+table_name ;
    
  	Statement stmt = conn.createStatement();
  	ResultSet rs = stmt.executeQuery(sqlstr);
  	rs.next();
  	int last_num = rs.getInt("last_num");
  	if(last_num != 0)
  	{
  		return (last_num + 1);
  	}
  	else
  	{
  		return 1;
  	}
  }
  
  //----------------------------------------------------
  // InsertBBS
  //     - Insert Table
  //   conn : Connection Object
  //----------------------------------------------------
  int InsertBBS(Connection conn, String table_name,int bbs_id,String subject,String creator,String password, String creator_email,String creator_home,String contents,String fileName,int fileSize,int p_bbs_id,int p_level,int p_serial) throws SQLException
  {
    String sqlstr;
    sqlstr  = "INSERT INTO "+table_name+" (bbs_id, subject, creator, password, creator_email, creator_home,create_date, contents, fileName, fileSize, hits, p_bbs_id, p_level, p_serial) ";
    sqlstr = sqlstr + " VALUES ("+bbs_id+",'"+subject+"','"+creator+"','"+password+"','"+creator_email+"','"+creator_home+"',";
    sqlstr = sqlstr + "(select SYSDATE from dual),'"+contents+"','"+fileName+"',"+fileSize+",0,"+p_bbs_id+","+p_level+","+p_serial+") ";
  
    Statement stmt = conn.createStatement();
    stmt.executeUpdate(sqlstr);
    int trans = stmt.getUpdateCount();
    return trans;
  }
  
  //----------------------------------------------------
  // UpdateBBSForSerial
  //     - Insert Table
  //   conn : Connection Object
  //----------------------------------------------------
  int UpdateBBSForSerial(Connection conn, String table_name, int p_bbs_id, int p_serial) throws SQLException
  {
    String sqlstr;
    sqlstr = " UPDATE "+table_name+" SET p_serial = (p_serial+1) ";
    sqlstr = sqlstr + " WHERE p_bbs_id = "+p_bbs_id+" AND p_serial > "+p_serial;
  
    Statement stmt = conn.createStatement();
    stmt.executeUpdate(sqlstr);
    int trans = stmt.getUpdateCount();
    return trans;
  }
  
  //----------------------------------------------------
  // UpdateBBS
  //     - Update(Modify) Table
  //   conn : Connection Object
  //----------------------------------------------------
  int UpdateBBS(Connection conn, String table_name,int bbs_id,String subject,String creator,String password, String creator_email,String creator_home,String contents,String fileName,int fileSize) throws SQLException
  {
    String sqlstr;
    sqlstr = "UPDATE "+table_name+" SET ";
    sqlstr = sqlstr + "subject='"+subject+"',create_date=sysdate,creator='"+creator+"',password='"+password+"',creator_email='"+creator_email+"',creator_home='"+creator_home+"',contents='"+contents+"',fileName='"+fileName+"',fileSize="+fileSize ;
    sqlstr = sqlstr + "WHERE bbs_id=" + bbs_id;
    
    System.out.println(sqlstr);
    
    Statement stmt = conn.createStatement();
    stmt.executeUpdate(sqlstr);
    int trans = stmt.getUpdateCount();
    return trans;
  }
  
  //----------------------------------------------------
  // DeleteBBS
  //     - Insert Table
  //   conn : Connection Object
  //----------------------------------------------------
  int DeleteBBS(Connection conn, String table_name, int bbs_id, String password) throws SQLException
  {
    String sqlstr;
    sqlstr = " DELETE FROM "+ table_name ;
    sqlstr = sqlstr + " WHERE bbs_id="+bbs_id+" AND password='"+password+"'";
    
    Statement stmt = conn.createStatement();
    stmt.executeUpdate(sqlstr);
    int trans = stmt.getUpdateCount();
    return trans;
  }
  
  //----------------------------------------------------
  // UpdateBBSHits
  //     - Insert Table
  //   conn : Connection Object
  //----------------------------------------------------
  int UpdateBBSHits(Connection conn, String table_name,int bbs_id,int  hits) throws SQLException
  {
    String sqlstr;
    sqlstr = " UPDATE "+ table_name +" SET " ;
    sqlstr = sqlstr + " hits = "+hits;
    sqlstr = sqlstr + " WHERE bbs_id = "+bbs_id;
    
    Statement stmt = conn.createStatement();
    stmt.executeUpdate(sqlstr);
    int trans = stmt.getUpdateCount();
    return trans;
  }
  
  

  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, "/notice/../error.jsp", session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      
response.setHeader("Pragma","no-cache"); //HTTP 1.0
response.setDateHeader ("Expires", 0);
response.setHeader("Cache-Control","no-cache"); //HTTP 1.1

String scmid = "";
String scmnm = "";
String usertype = "";
String usergroup = "";
//String scmsubids = "";
String _adminid = "";
String _adminname = "";
String _admingroup = "";
String _apessid = "";
String _apessname = "";

try{
  scmid = (String) session.getAttribute("scmid");
  _adminid = (String) session.getAttribute("adminid");

  if( (scmid == null || scmid.length() == 0 || scmid.equals("null"))
      && (_adminid == null || _adminid.length() == 0 || _adminid.equals("null")) ) {
    response.sendRedirect("/login_first.html");
    return;
  }

  _adminname = (String) session.getAttribute("adminname");

  _apessid = (String) session.getAttribute("apessid");
  _apessname = (String) session.getAttribute("apessname");

  scmnm = (String) session.getAttribute("scmnm");

  usertype = (String) session.getAttribute("usertype");
  if (usertype == null) usertype = "";

  usergroup = (String) session.getAttribute("usergroup");
  if (usergroup == null) usergroup = "";

  //scmsubids = (String) session.getAttribute("scmsubids");
  //session.setMaxInactiveInterval(60*60);

}catch( Exception e ) {
  response.sendRedirect("/login_first.html");
  return;
}

      out.write(_jsp_string1, 0, _jsp_string1.length);
      
//-------------------------------------------------------------
//
//-------------------------------------------------------------
String table_name = request.getParameter("table_name");
//String table_name = "notice" ;
String reqpage      = request.getParameter("page");
String oper_type    = request.getParameter("oper_type");
String qry_cond     = request.getParameter("qry_cond");
String qry_contents = ascToksc(request.getParameter("qry_contents"));

//SimpleDateFormat dd = new SimpleDateFormat("yyyyMMdd");
//String today = dd.format(new java.util.Date());
String today = DateUtil.getFmtDateString(DateUtil.getRelativeDate(new java.util.Date(), 0, 0, -7) , "yyyyMMdd");

int curpage,totpage,i,value,idx;
String url=null, addtag=null;

Connection conn =  DB_Connection();
ResultSet rs = null;

if (qry_cond == null)
	qry_cond = "subject";
if (qry_contents == null)
	qry_contents = "";

rs = SelectBBSQryCount(conn, table_name, qry_cond, qry_contents);

rs.next();
int postcount= rs.getInt("counter");
rs.close();

if (postcount == 0)
{
  url = "link.jsp?table_name="+table_name;
  out.println(Redirect(url));
}
else
{
	if(reqpage == null)
		curpage = 1;
	else
		curpage = Integer.parseInt(reqpage);

	int ipp = 10; // ** The Number of Display
	int vmod = postcount % ipp;

	if(vmod == 0)
		totpage = postcount/ipp;
	else
		totpage = postcount/ipp + 1;

	int go_idx = (curpage-1)*ipp;

	rs = SelectBBSQry(conn, table_name, qry_cond, qry_contents);

	for (i=0; i<go_idx; i++)
	  rs.next();
	
      out.write(_jsp_string2, 0, _jsp_string2.length);
      out.print(( table_name.equals("notice") ? "Manuals" : "Tag Specs" ));
      out.write(_jsp_string3, 0, _jsp_string3.length);
      out.print((postcount ));
      out.write(_jsp_string4, 0, _jsp_string4.length);
      
	      //------------------------------------------------
	      //
	      //------------------------------------------------
	      	String qry_cond_value[] = { "subject", "creator", "contents" };
	      	String qry_cond_name[] = { "subject", "creater", "contens" };

	      	String[] selectBox_check = SelectBoxCheck(qry_cond, qry_cond_value);

	        for (int j=0; j < qry_cond_value.length; j++)
	        {
	        	out.println("<OPTION value='" + qry_cond_value[j] + "' " + selectBox_check[j] + ">" + qry_cond_name[j]);
	        }
	      //------------------------------------------------
	      
      out.write(_jsp_string5, 0, _jsp_string5.length);
      out.print((kscToasc(qry_contents) ));
      out.write(_jsp_string6, 0, _jsp_string6.length);
      out.print((table_name ));
      out.write(_jsp_string7, 0, _jsp_string7.length);
      
	for(i=1;i<=ipp;i++)
	{
	  if (!rs.next()) break;
		if (curpage == (totpage))
		{
			value = postcount % ipp;
			if (i > value && value != 0)
				break;
	  }

	  int bbs_id = rs.getInt("bbs_id");

	  String subject = kscToasc(rs.getString("subject"));
	  subject = subject.replace('\b', '\'');
	  String creator = kscToasc(rs.getString("creator"));
	  String creator_email = kscToasc(rs.getString("creator_email"));
	  String creator_home = kscToasc(rs.getString("creator_home"));
	  String create_date = kscToasc(rs.getString("create_date"));
    String filename = rs.getString("filename");

          //String d2 = Integer.toString( Integer.parseInt(create_date.substring(8,10))+3 ) ;
          String d3 = create_date.substring(0,4)+create_date.substring(5,7)+create_date.substring(8,10);
	  int hits = rs.getInt("hits");
	  int p_level = rs.getInt("p_level");
	
      out.write(_jsp_string8, 0, _jsp_string8.length);
      
		if(p_level ==0)
		{
			out.println(bbs_id);
		}
		else
		{
			out.println("&nbsp;");
		}
	      
      out.write(_jsp_string9, 0, _jsp_string9.length);
      
               if ( filename.equals("null") || filename.length() < 3 )
                  {
                  out.println("<TD width=32><IMG src='images/icon1.gif'></TD>");
                  }
               else
                  {
                   out.println(" <TD width=32><IMG src='images/disk.gif'></TD>");
                  }
               
      out.write(_jsp_string10, 0, _jsp_string10.length);
      out.print((creator ));
      out.write(_jsp_string11, 0, _jsp_string11.length);
      
               if(p_level >0)
                {
                        for(idx=1;idx <= (p_level);idx++)
                                out.println("&nbsp;");
                                out.println("<IMG src='images/rep.gif'>");
                } else {
                      //if (Float.parseFloat(d3) >= Float.parseFloat(today) ) out.println("<IMG src='images/new.gif'>");
                      if (Long.parseLong(d3) >= Long.parseLong(today) ) out.println("<IMG src='images/new.gif'>");
                }

		String link_data  = "table_name="+table_name+"&bbs_id="+bbs_id;
		link_data += "&qry_cond="+qry_cond+"&qry_contents="+qry_contents+"&page="+curpage;

		//out.println("<A href='view.jsp?"+link_data+"'>");
		out.println("<A href='." + filename + "'>");

		if (subject.length() > 40)
		{
			out.println(subject.substring(0,40));
			out.println("...");
		}
		else
			out.println(subject);

		out.println("</A>");

		if(hits> 20)
		{
			//out.println("<IMG src='images/hot.gif'>");
		}
	      
      out.write(_jsp_string12, 0, _jsp_string12.length);
      out.print((create_date.substring(0,10) ));
      out.write(_jsp_string13, 0, _jsp_string13.length);
      
	}
	
      out.write(_jsp_string14, 0, _jsp_string14.length);
      
	//------------------------------------------------
	// page function call
	//------------------------------------------------
	url = "list.jsp";
	addtag = "&table_name="+table_name+"&qry_cond="+qry_cond+"&qry_contents="+kscToasc(qry_contents);

	out.println(GetPageIndex(curpage, totpage, url, addtag));
	//------------------------------------------------
	
      out.write(_jsp_string15, 0, _jsp_string15.length);
      
	out.println(CopyRightLogo());
	
      out.write(_jsp_string16, 0, _jsp_string16.length);
      
}
DB_Disconnection(conn);

      out.write('\n');
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 5783496155892875126L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("notice/list.jsp"), -8625199030933603791L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("login_check.jsp"), 5313538553479869376L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("notice/include/db_conn.jsp"), 5027835999418368389L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("notice/include/include_com.jsp"), -9216627277686658642L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("notice/include/include_bbs.jsp"), -176268358578414251L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string3;
  private final static char []_jsp_string13;
  private final static char []_jsp_string12;
  private final static char []_jsp_string8;
  private final static char []_jsp_string9;
  private final static char []_jsp_string0;
  private final static char []_jsp_string2;
  private final static char []_jsp_string1;
  private final static char []_jsp_string6;
  private final static char []_jsp_string15;
  private final static char []_jsp_string7;
  private final static char []_jsp_string16;
  private final static char []_jsp_string5;
  private final static char []_jsp_string4;
  private final static char []_jsp_string14;
  private final static char []_jsp_string10;
  private final static char []_jsp_string11;
  static {
    _jsp_string3 = "</td>\n</tr>\n<tr>\n  <td width=\"100%\" height=\"2\" colspan=\"2\"><hr width=\"100%\"></td>\n</tr>\n<tr>\n  <td width=\"100%\" height=\"10\" colspan=\"2\"></td>\n</tr>\n</table>\n\n	  <TABLE border=\"0\" width=\"99%\" align='center'>\n\n	    <TR>\n	      <TD colspan=\"3\">\n                  <LI><FONT size=\"2\">Total documents count recorded  ".toCharArray();
    _jsp_string13 = " </FONT></TD>\n	    </TR>\n	".toCharArray();
    _jsp_string12 = "\n	      </FONT></TD>\n	      <TD width=\"100\"><FONT size=\"2\"> ".toCharArray();
    _jsp_string8 = "\n	    <TR align=\"center\" >\n	      <TD  width=\"32\" align=right><FONT size=\"2\">\n	      ".toCharArray();
    _jsp_string9 = "\n\n	      </FONT></TD>\n              ".toCharArray();
    _jsp_string0 = "\n\n\n\n".toCharArray();
    _jsp_string2 = "\n<HTML>\n<HEAD>\n<TITLE></TITLE>\n<link href=\"/common/css/style.css\" rel=\"stylesheet\" type=\"text/css\">\n</HEAD>\n<body leftmargin=\"0\" topmargin=\"0\" marginwidth=\"0\" marginheight=\"0\">\n<table width=\"840\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tr><td>\n\n<table width=\"99%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\">\n<tr>\n  <td width=\"100%\" height=\"15\" colspan=\"2\"></td>\n</tr>\n<tr>\n  <td width=\"3%\"><img src=\"/img/title_icon.gif\"></td>\n  <td width=\"*\" class=\"left_title\">".toCharArray();
    _jsp_string1 = "\n\n\n\n\r\n\r\n\n".toCharArray();
    _jsp_string6 = "\" size=\"20\" maxlength=\"30\">\n	        <INPUT type=\"hidden\" name=\"table_name\" value=\"".toCharArray();
    _jsp_string15 = "\n           </CENTER> </TD>\n        </TR>\n        </Table>\n	  ".toCharArray();
    _jsp_string7 = "\">\n	        <INPUT type=\"submit\" value=\"Search\">\n	        <INPUT type=\"reset\" value=\"Reset\" name=submit1>\n	      </TD>\n	      </FORM>\n	    </TR>\n\n	    </TABLE>\n	  <TABLE border=\"1\" width=\"99%\" cellpadding=\"1\" cellspacing=\"1\" bordercolor=\"black\" align='center'>\n	    <TR align=\"center\" bgcolor=8a2be2>\n	      <TD width=\"32\" ><FONT color=\"white\" size=\"2\">No.</FONT></TD>\n        <TD width=\"32\" ><FONT color=\"white\" size=\"2\">Type</FONT></TD>\n	      <TD width=\"83\" ><FONT color=\"white\" size=\"2\">Name</FONT></TD>\n	      <TD width=\"340\" ><FONT color=\"white\" size=\"2\">Subject</FONT></TD>\n	      <TD width=\"100\" ><FONT color=\"white\" size=\"2\">Date</FONT></TD>\n	    </TR>\n	".toCharArray();
    _jsp_string16 = "\n\n  </td></tr></table>\n	</BODY>\n	</HTML>\n".toCharArray();
    _jsp_string5 = "\n	        </SELECT>\n	        <INPUT type=\"text\" name=\"qry_contents\" value=\"".toCharArray();
    _jsp_string4 = ".\n                                                <IMG src='images/new.gif'> Today new documents</FONT></LI>\n\n	      </TD>\n	    </TR>\n	    <TR>\n	      <FORM name=\"form_1\" action=\"list.jsp\" method=\"post\">\n	      <TD align=center>\n	      	<SELECT name=\"qry_cond\">\n	      ".toCharArray();
    _jsp_string14 = "\n	  </TABLE>\n	  <BR>\n        <TABLE width=\"99%\" border=\"0\" align='center'>\n         <TR>\n             <TD><CENTER>\n\n	".toCharArray();
    _jsp_string10 = "\n\n	      <TD width=\"83\"><FONT size=\"2\">".toCharArray();
    _jsp_string11 = "</FONT></TD>\n	      <TD width=\"340\" align='left'><FONT size=\"2\">\n	      ".toCharArray();
  }
}
